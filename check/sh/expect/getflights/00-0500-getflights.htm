<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>getflights &middot; debug output</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta name="author" content="Tobias Kühne">
</head>
<body>
<pre>
arrival
http://localhost/.../flugplan/airportcity?type=arrival&time=0000-00-00T05%3A00%3A00%2B0100&typ=p&context=0&sprache=de&items=3&init=true&page=1
http://localhost/.../flugplan/airportcity?type=arrival&time=0000-00-00T05%3A00%3A00%2B0100&typ=p&context=0&sprache=de&items=3&usepager=true&page=2
http://localhost/.../flugplan/airportcity?type=arrival&time=0000-00-00T05%3A00%3A00%2B0100&typ=p&context=0&sprache=de&items=3&usepager=true&page=3
http://localhost/.../flugplan/airportcity?type=arrival&time=0000-00-00T05%3A00%3A00%2B0100&typ=p&context=0&sprache=de&items=3&usepager=true&page=4
http://localhost/.../flugplan/airportcity?type=arrival&time=0000-00-00T05%3A00%3A00%2B0100&typ=p&context=0&sprache=de&items=3&usepager=true&page=5
SELECT `id` FROM `airlines` WHERE `code`='SA';
=99
SELECT `id` FROM `airlines` WHERE `code`='SA';
=99
SELECT `id` FROM `models` WHERE `icao`='A346';
=19
SELECT `id` FROM `aircrafts` WHERE `reg`='ZS-SNH';
=<empty>
INSERT INTO `aircrafts`(`uid`, `reg`,`model`) VALUES(1, 'ZS-SNH', 19);
=1
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='arrival' AND `airline`=99 AND `code`='260' AND `scheduled`='0000-00-00 06:15'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'arrival', 99, '260', '0000-00-00 06:15', '0000-00-00 05:55', 1, 19);
=OK
SELECT `num`, `current`, `previous` FROM `visits` WHERE `aircraft`=1;
=<empty>
INSERT INTO `visits`(`aircraft`, `num`, `current`, `previous`) VALUES(1, 1, '0000-00-00 06:15', NULL);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='CX';
=24
SELECT `id` FROM `airlines` WHERE `code`='CX';
=24
SELECT `id` FROM `models` WHERE `icao`='B77W';
=68
SELECT `id` FROM `aircrafts` WHERE `reg`='B-KPE';
=<empty>
INSERT INTO `aircrafts`(`uid`, `reg`,`model`) VALUES(1, 'B-KPE', 68);
=2
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='arrival' AND `airline`=24 AND `code`='289' AND `scheduled`='0000-00-00 06:20'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'arrival', 24, '289', '0000-00-00 06:20', NULL, 2, 68);
=OK
SELECT `num`, `current`, `previous` FROM `visits` WHERE `aircraft`=2;
=<empty>
INSERT INTO `visits`(`aircraft`, `num`, `current`, `previous`) VALUES(2, 1, '0000-00-00 06:20', NULL);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='AC';
=4
SELECT `id` FROM `airlines` WHERE `code`='AC';
=4
SELECT `id` FROM `models` WHERE `icao`='A333';
=14
SELECT `id` FROM `aircrafts` WHERE `reg`='C-GFAH';
=<empty>
INSERT INTO `aircrafts`(`uid`, `reg`,`model`) VALUES(1, 'C-GFAH', 14);
=3
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='arrival' AND `airline`=4 AND `code`='874' AND `scheduled`='0000-00-00 07:00'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'arrival', 4, '874', '0000-00-00 07:00', '0000-00-00 07:00', 3, 14);
=OK
SELECT `num`, `current`, `previous` FROM `visits` WHERE `aircraft`=3;
=<empty>
INSERT INTO `visits`(`aircraft`, `num`, `current`, `previous`) VALUES(3, 1, '0000-00-00 07:00', NULL);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='UA';
=120
SELECT `id` FROM `airlines` WHERE `code`='UA';
=120
SELECT `id` FROM `models` WHERE `icao`='B744';
=57
SELECT `id` FROM `aircrafts` WHERE `reg`='N116UA';
=<empty>
INSERT INTO `aircrafts`(`uid`, `reg`,`model`) VALUES(1, 'N116UA', 57);
=4
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='arrival' AND `airline`=120 AND `code`='903' AND `scheduled`='0000-00-00 09:45'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'arrival', 120, '903', '0000-00-00 09:45', NULL, 4, 57);
=OK
SELECT `num`, `current`, `previous` FROM `visits` WHERE `aircraft`=4;
=<empty>
INSERT INTO `visits`(`aircraft`, `num`, `current`, `previous`) VALUES(4, 1, '0000-00-00 09:45', NULL);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='TK';
=112
SELECT `id` FROM `airlines` WHERE `code`='TK';
=112
SELECT `id` FROM `models` WHERE `icao`='A343';
=17
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='arrival' AND `airline`=112 AND `code`='1587' AND `scheduled`='0000-00-00 10:40'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'arrival', 112, '1587', '0000-00-00 10:40', NULL, NULL, 17);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='AC';
=4
SELECT `id` FROM `airlines` WHERE `code`='AC';
=4
SELECT `id` FROM `models` WHERE `icao`='A333';
=14
SELECT `id` FROM `aircrafts` WHERE `reg`='C-GHLM';
=<empty>
INSERT INTO `aircrafts`(`uid`, `reg`,`model`) VALUES(1, 'C-GHLM', 14);
=5
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='arrival' AND `airline`=4 AND `code`='844' AND `scheduled`='0000-00-00 11:15'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'arrival', 4, '844', '0000-00-00 11:15', NULL, 5, 14);
=OK
SELECT `num`, `current`, `previous` FROM `visits` WHERE `aircraft`=5;
=<empty>
INSERT INTO `visits`(`aircraft`, `num`, `current`, `previous`) VALUES(5, 1, '0000-00-00 11:15', NULL);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='AC';
=4
SELECT `id` FROM `airlines` WHERE `code`='AC';
=4
SELECT `id` FROM `models` WHERE `icao`='A333';
=14
SELECT `id` FROM `aircrafts` WHERE `reg`='C-GHKW';
=<empty>
INSERT INTO `aircrafts`(`uid`, `reg`,`model`) VALUES(1, 'C-GHKW', 14);
=6
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='arrival' AND `airline`=4 AND `code`='876' AND `scheduled`='0000-00-00 11:45'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'arrival', 4, '876', '0000-00-00 11:45', NULL, 6, 14);
=OK
SELECT `num`, `current`, `previous` FROM `visits` WHERE `aircraft`=6;
=<empty>
INSERT INTO `visits`(`aircraft`, `num`, `current`, `previous`) VALUES(6, 1, '0000-00-00 11:45', NULL);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='TP';
=113
SELECT `id` FROM `airlines` WHERE `code`='TP';
=113
SELECT `id` FROM `models` WHERE `icao`='A320';
=9
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='arrival' AND `airline`=113 AND `code`='572' AND `scheduled`='0000-00-00 12:35'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'arrival', 113, '572', '0000-00-00 12:35', NULL, NULL, 9);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='KU';
=63
SELECT `id` FROM `airlines` WHERE `code`='KU';
=63
SELECT `id` FROM `models` WHERE `icao`='A306';
=4
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='arrival' AND `airline`=63 AND `code`='171' AND `scheduled`='0000-00-00 13:20'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'arrival', 63, '171', '0000-00-00 13:20', NULL, NULL, 4);
=OK

/************************************/


/************************************/

SELECT `id` FROM `airlines` WHERE `code`='TP';
=113
SELECT `id` FROM `airlines` WHERE `code`='TP';
=113
SELECT `id` FROM `models` WHERE `icao`='A320';
=9
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='arrival' AND `airline`=113 AND `code`='576' AND `scheduled`='0000-00-00 18:25'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'arrival', 113, '576', '0000-00-00 18:25', NULL, NULL, 9);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='SQ';
=105
SELECT `id` FROM `airlines` WHERE `code`='SQ';
=105
SELECT `id` FROM `models` WHERE `icao`='B77W';
=68
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='arrival' AND `airline`=105 AND `code`='326' AND `scheduled`='0000-00-00 20:30'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'arrival', 105, '326', '0000-00-00 20:30', NULL, NULL, 68);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='TP';
=113
SELECT `id` FROM `airlines` WHERE `code`='TP';
=113
SELECT `id` FROM `models` WHERE `icao`='A320';
=9
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='arrival' AND `airline`=113 AND `code`='578' AND `scheduled`='0000-00-00 22:30'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'arrival', 113, '578', '0000-00-00 22:30', NULL, NULL, 9);
=OK

/************************************/

---------------------------
12 Flüge gefunden.
    Dauer: 0.000s

===========================

departure
http://localhost/.../flugplan/airportcity?type=departure&time=0000-00-00T05%3A00%3A00%2B0100&typ=p&context=0&sprache=de&items=3&init=true&page=1
http://localhost/.../flugplan/airportcity?type=departure&time=0000-00-00T05%3A00%3A00%2B0100&typ=p&context=0&sprache=de&items=3&usepager=true&page=2
http://localhost/.../flugplan/airportcity?type=departure&time=0000-00-00T05%3A00%3A00%2B0100&typ=p&context=0&sprache=de&items=3&usepager=true&page=3
http://localhost/.../flugplan/airportcity?type=departure&time=0000-00-00T05%3A00%3A00%2B0100&typ=p&context=0&sprache=de&items=3&usepager=true&page=4
http://localhost/.../flugplan/airportcity?type=departure&time=0000-00-00T05%3A00%3A00%2B0100&typ=p&context=0&sprache=de&items=3&usepager=true&page=5
SELECT `id` FROM `airlines` WHERE `code`='TP';
=113
SELECT `id` FROM `airlines` WHERE `code`='TP';
=113
SELECT `id` FROM `models` WHERE `icao`='A320';
=9
SELECT `id` FROM `aircrafts` WHERE `reg`='CS-TNP';
=<empty>
INSERT INTO `aircrafts`(`uid`, `reg`,`model`) VALUES(1, 'CS-TNP', 9);
=7
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='departure' AND `airline`=113 AND `code`='571' AND `scheduled`='0000-00-00 06:20'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'departure', 113, '571', '0000-00-00 06:20', NULL, 7, 9);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='AC';
=4
SELECT `id` FROM `airlines` WHERE `code`='AC';
=4
SELECT `id` FROM `models` WHERE `icao`='A333';
=14
SELECT `id` FROM `aircrafts` WHERE `reg`='C-GFAH';
=3
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='departure' AND `airline`=4 AND `code`='845' AND `scheduled`='0000-00-00 10:30'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'departure', 4, '845', '0000-00-00 10:30', NULL, 3, 14);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='TK';
=112
SELECT `id` FROM `airlines` WHERE `code`='TK';
=112
SELECT `id` FROM `models` WHERE `icao`='A343';
=17
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='departure' AND `airline`=112 AND `code`='1588' AND `scheduled`='0000-00-00 11:45'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'departure', 112, '1588', '0000-00-00 11:45', NULL, NULL, 17);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='UA';
=120
SELECT `id` FROM `airlines` WHERE `code`='UA';
=120
SELECT `id` FROM `models` WHERE `icao`='B744';
=57
SELECT `id` FROM `aircrafts` WHERE `reg`='N116UA';
=4
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='departure' AND `airline`=120 AND `code`='902' AND `scheduled`='0000-00-00 12:15'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'departure', 120, '902', '0000-00-00 12:15', NULL, 4, 57);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='CX';
=24
SELECT `id` FROM `airlines` WHERE `code`='CX';
=24
SELECT `id` FROM `models` WHERE `icao`='B77W';
=68
SELECT `id` FROM `aircrafts` WHERE `reg`='B-KPE';
=2
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='departure' AND `airline`=24 AND `code`='288' AND `scheduled`='0000-00-00 12:55'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'departure', 24, '288', '0000-00-00 12:55', NULL, 2, 68);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='TP';
=113
SELECT `id` FROM `airlines` WHERE `code`='TP';
=113
SELECT `id` FROM `models` WHERE `icao`='A320';
=9
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='departure' AND `airline`=113 AND `code`='573' AND `scheduled`='0000-00-00 13:20'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'departure', 113, '573', '0000-00-00 13:20', NULL, NULL, 9);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='AC';
=4
SELECT `id` FROM `airlines` WHERE `code`='AC';
=4
SELECT `id` FROM `models` WHERE `icao`='A333';
=14
SELECT `id` FROM `aircrafts` WHERE `reg`='C-GHLM';
=5
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='departure' AND `airline`=4 AND `code`='875' AND `scheduled`='0000-00-00 13:30'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'departure', 4, '875', '0000-00-00 13:30', NULL, 5, 14);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='KU';
=63
SELECT `id` FROM `airlines` WHERE `code`='KU';
=63
SELECT `id` FROM `models` WHERE `icao`='A306';
=4
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='departure' AND `airline`=63 AND `code`='172' AND `scheduled`='0000-00-00 14:30'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'departure', 63, '172', '0000-00-00 14:30', NULL, NULL, 4);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='AC';
=4
SELECT `id` FROM `airlines` WHERE `code`='AC';
=4
SELECT `id` FROM `models` WHERE `icao`='A333';
=14
SELECT `id` FROM `aircrafts` WHERE `reg`='C-GHKW';
=6
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='departure' AND `airline`=4 AND `code`='877' AND `scheduled`='0000-00-00 17:00'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'departure', 4, '877', '0000-00-00 17:00', NULL, 6, 14);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='TP';
=113
SELECT `id` FROM `airlines` WHERE `code`='TP';
=113
SELECT `id` FROM `models` WHERE `icao`='A320';
=9
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='departure' AND `airline`=113 AND `code`='579' AND `scheduled`='0000-00-00 19:10'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'departure', 113, '579', '0000-00-00 19:10', NULL, NULL, 9);
=OK

/************************************/

SELECT `id` FROM `airlines` WHERE `code`='SA';
=99
SELECT `id` FROM `airlines` WHERE `code`='SA';
=99
SELECT `id` FROM `models` WHERE `icao`='A346';
=19
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='departure' AND `airline`=99 AND `code`='261' AND `scheduled`='0000-00-00 20:45'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'departure', 99, '261', '0000-00-00 20:45', NULL, NULL, 19);
=OK

/************************************/


/************************************/

SELECT `id` FROM `airlines` WHERE `code`='SQ';
=105
SELECT `id` FROM `airlines` WHERE `code`='SQ';
=105
SELECT `id` FROM `models` WHERE `icao`='B77W';
=68
SELECT `id`, `aircraft` FROM `flights` WHERE `direction`='departure' AND `airline`=105 AND `code`='325' AND `scheduled`='0000-00-00 21:55'
=<empty>
INSERT INTO `flights` (`uid`, `type`, `direction`, `airline`, `code`, `scheduled`, `expected`, `aircraft`, `model`) VALUES(1, 'pax-regular', 'departure', 105, '325', '0000-00-00 21:55', NULL, NULL, 68);
=OK

/************************************/

---------------------------
12 Flüge gefunden.
    Dauer: 0.000s

===========================

SELECT `flights`.`id`, `airlines`.`code`, `flights`.`code`, `flights`.`scheduled`, `flights`.`direction` FROM `flights` LEFT JOIN `airlines` ON `flights`.`airline` = `airlines`.`id` WHERE `airport` IS NULL AND (`scheduled` >= '0000-00-00T05:00:00+0100' OR `expected` >= '0000-00-00T05:00:00+0100' OR (TIME_TO_SEC(TIMEDIFF('0000-00-00T05:00:00+0100', `scheduled`)) / 60 / 60) < 2) ORDER BY `scheduled`;
=1,...
=13,...
=2,...
=3,...
=4,...
=14,...
=5,...
=6,...
=7,...
=15,...
=16,...
=8,...
=17,...
=18,...
=9,...
=19,...
=20,...
=21,...
=10,...
=22,...
=11,...
=23,...
=24,...
=12,...
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fia=SA26000000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fid=TP57100000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fia=CX28900000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fia=AC87400000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fia=UA90300000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fid=AC84500000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fia=TK158700000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fia=AC84400000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fia=AC87600000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fid=TK158800000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fid=UA90200000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fia=TP57200000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fid=CX28800000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fid=TP57300000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fia=KU17100000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fid=AC87500000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fid=KU17200000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fid=AC87700000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fia=TP57600000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fid=TP57900000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fia=SQ32600000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fid=SA26100000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fid=SQ32500000000
http://localhost/.../flugplan/airportcity?time=0000-00-00T05%3A00%3A00%2B0100&fia=TP57800000000
SELECT `airports`.`id` FROM `airports` WHERE `iata`='JNB' AND `icao`='FAOR';
=323
UPDATE `flights` SET `airport`=323 WHERE `id`=1;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='LIS' AND `icao`='LPPT';
=136
UPDATE `flights` SET `airport`=136 WHERE `id`=13;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='HKG' AND `icao`='VHHH';
=98
UPDATE `flights` SET `airport`=98 WHERE `id`=2;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='YUL' AND `icao`='CYUL';
=245
UPDATE `flights` SET `airport`=245 WHERE `id`=3;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='SFO' AND `icao`='KSFO';
=201
UPDATE `flights` SET `airport`=201 WHERE `id`=4;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='YYC' AND `icao`='CYYC';
=247
UPDATE `flights` SET `airport`=247 WHERE `id`=14;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='IST' AND `icao`='LTBA';
=109
UPDATE `flights` SET `airport`=109 WHERE `id`=5;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='YYC' AND `icao`='CYYC';
=247
UPDATE `flights` SET `airport`=247 WHERE `id`=6;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='YYZ' AND `icao`='CYYZ';
=248
UPDATE `flights` SET `airport`=248 WHERE `id`=7;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='IST' AND `icao`='LTBA';
=109
UPDATE `flights` SET `airport`=109 WHERE `id`=15;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='SFO' AND `icao`='KSFO';
=201
UPDATE `flights` SET `airport`=201 WHERE `id`=16;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='LIS' AND `icao`='LPPT';
=136
UPDATE `flights` SET `airport`=136 WHERE `id`=8;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='HKG' AND `icao`='VHHH';
=98
UPDATE `flights` SET `airport`=98 WHERE `id`=17;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='LIS' AND `icao`='LPPT';
=136
UPDATE `flights` SET `airport`=136 WHERE `id`=18;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='KWI' AND `icao`='OKBK';
=123
UPDATE `flights` SET `airport`=123 WHERE `id`=9;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='YUL' AND `icao`='CYUL';
=245
UPDATE `flights` SET `airport`=245 WHERE `id`=19;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='KWI' AND `icao`='OKBK';
=123
UPDATE `flights` SET `airport`=123 WHERE `id`=20;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='YYZ' AND `icao`='CYYZ';
=248
UPDATE `flights` SET `airport`=248 WHERE `id`=21;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='LIS' AND `icao`='LPPT';
=136
UPDATE `flights` SET `airport`=136 WHERE `id`=10;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='LIS' AND `icao`='LPPT';
=136
UPDATE `flights` SET `airport`=136 WHERE `id`=22;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='SIN' AND `icao`='WSSS';
=204
UPDATE `flights` SET `airport`=204 WHERE `id`=11;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='JNB' AND `icao`='FAOR';
=323
UPDATE `flights` SET `airport`=323 WHERE `id`=23;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='SIN' AND `icao`='WSSS';
=204
UPDATE `flights` SET `airport`=204 WHERE `id`=24;
=OK
SELECT `airports`.`id` FROM `airports` WHERE `iata`='LIS' AND `icao`='LPPT';
=136
UPDATE `flights` SET `airport`=136 WHERE `id`=12;
=OK

INSERT INTO `watchlist-notifications`(`flight`, `watch`)  SELECT `flights`.`id`, `watchlist`.`id` FROM `watchlist` INNER JOIN `aircrafts` ON `aircrafts`.`reg` LIKE REPLACE(REPLACE(`watchlist`.`reg`, '*', '%'), '?', '_') INNER JOIN (SELECT `id`, `direction`, IFNULL(`expected`, `scheduled`) AS `expected`, `aircraft` FROM `flights` WHERE `aircraft` IS NOT NULL) AS `flights` ON `aircrafts`.`id` = `flights`.`aircraft` LEFT JOIN `watchlist-notifications` ON `watchlist-notifications`.`flight` = `flights`.`id` WHERE `watchlist`.`notify` = TRUE AND `watchlist-notifications`.`flight` IS NULL AND 'arrival' = `flights`.`direction` AND `expected` > '0000-00-00T05:00:00+0100' FOR UPDATE
SELECT `watchlist-notifications`.`id` AS `id`, UNIX_TIMESTAMP(IFNULL(`flights`.`expected`, `flights`.`scheduled`)) AS `expected`, CONCAT(`airlines`.`code`, `flights`.`code`) AS `flight`, `aircrafts`.`reg` AS `reg`, `watchlist`.`comment` AS `comment`, `users`.`name` AS `name`, `users`.`email` AS `email`, `users`.`notification-timefmt` AS `fmt`, `users`.`language` AS `lang` FROM `watchlist-notifications` LEFT JOIN `watchlist` ON `watchlist-notifications`.`watch` = `watchlist`.`id` LEFT JOIN `flights` ON `watchlist-notifications`.`flight` = `flights`.`id` LEFT JOIN `airlines` ON `flights`.`airline` = `airlines`.`id` LEFT JOIN `aircrafts` ON `flights`.`aircraft` = `aircrafts`.`id` LEFT JOIN `users` ON `watchlist`.`user` = `users`.`id` WHERE IFNULL(`flights`.`expected`, `flights`.`scheduled`) > '0000-00-00T05:00:00+0100' AND `notified` IS NULL AND FROM_UNIXTIME(1450411200, '%H:%i:%s') BETWEEN `users`.`notification-from` AND `users`.`notification-until` ORDER BY `email` ASC, `expected` ASC
fra-schedule@flederwiesel.com:
+0 09:45	N116UA	"United"
UPDATE `watchlist-notifications` LEFT JOIN `watchlist` ON `watchlist`.`id`=`watchlist-notifications`.`watch` INNER JOIN `users` ON `users`.`id`=`watchlist`.`user` AND `users`.`email`='fra-schedule@flederwiesel.com' SET `watchlist-notifications`.`notified`='0000-00-00T05:00:00+0100' WHERE `watchlist-notifications`.`id` IN(2)
DELETE `watchlist-notifications` FROM `watchlist-notifications` INNER JOIN `flights` ON `flights`.`id`=`watchlist-notifications`.`flight` WHERE (DATEDIFF('0000-00-00T05:00:00+0100', IFNULL(`flights`.`expected`, `flights`.`scheduled`)) > 1)


=== fin. ===
</pre>
</body>
</html>
